var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;"undefined"!=typeof require&&require;import{l as o,y as a,D as c,v as s,r as i,L as u,R as d,a as g,S as v}from"./vendor.9510d0c2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const p="https://pdapi.vladb.xyz",f=e=>({root:p,fetchAllSchedules:`${p}/v2/schedules`,fetchSchedule:`${p}/v2/schedule/${null!=e?e:""}`}),h=()=>Math.floor(new Date((new Date).getTime()+60*(()=>{const e=new Date;return e.getTimezoneOffset()<(()=>{const e=new Date(0,1),t=new Date(6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())})()?-4:-5})()*60*1e3).getTime()/1e3),w=e=>{const[t,n]=o((()=>localStorage.getItem(e))),r=()=>{const r=localStorage.getItem(e);r!==t&&n(r)};return a((()=>{const t=t=>{t.storageArea===localStorage&&t.key===e&&n(t.newValue)},l=t=>{t.detail.key===e&&r()};return window.addEventListener("storage",t),window.addEventListener("customStorageChange",l),()=>{window.removeEventListener("storage",t),window.removeEventListener("customStorageChange",l)}})),a((()=>{t?localStorage.setItem(e,t):localStorage.removeItem(e),window.dispatchEvent(new CustomEvent("customStorageChange",{detail:{key:e}})),r()}),[e,t]),[t,n]},m=c({}),x=({children:e})=>{const[t,n]=o({currentSlot:null,schedule:null,overwriteMessage:null,now:new Date}),[r]=w("schedule_id");return a((()=>{r?(async e=>{console.log("downloading data");const{fetchSchedule:t}=f(e),n=await fetch(t);return await n.json()})(r).then((e=>{console.log("setting"),setInterval((()=>(e=>{if(!e)return console.log("no data",e);const t=(new Date).getDay(),r=e[(0===t?6:t-1).toString()],l=h(),o=l%86400;let a;if(r.forEach((e=>{e.start<=o&&e.end>=o&&(a=e)})),!a)return alert("Failure to generate now, please report to vlad!"),console.log(a,o,l,r),n({schedule:e,now:new Date,overwriteMessage:"Failed to generate current slot",currentSlot:null});n({schedule:e,currentSlot:a,overwriteMessage:null,now:new Date})})(e)),250)})).catch((()=>{console.log("failed load?!")})):n({schedule:null,currentSlot:null,overwriteMessage:"Please select a schedule in the settings menu",now:new Date})}),[r]),s(m.Provider,{value:t},e)},y=e=>o=>{var a=((e,l)=>{var o={};for(var a in e)n.call(e,a)&&l.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&t)for(var a of t(e))l.indexOf(a)<0&&r.call(e,a)&&(o[a]=e[a]);return o})(o,[]);return s(m.Consumer,null,(o=>s(e,((e,o)=>{for(var a in o||(o={}))n.call(o,a)&&l(e,a,o[a]);if(t)for(var a of t(o))r.call(o,a)&&l(e,a,o[a]);return e})({data:o},a))))};var b=y((({display:e,data:t})=>{const{overwriteText:n,counter:r}=(e=>{if(e.overwriteMessage)return{overwriteText:e.overwriteMessage,counter:null};if(!e.currentSlot)return console.log("no data",e),{overwriteText:"Loading...",counter:null};const t=h()%86400,n=1e3*(e.currentSlot.end-t);return{overwriteText:"",counter:new Date((new Date).getTime()+n)}})(t);return s(e,{end:r,overwriteText:n})}));var S=y((({display:e,data:t})=>{var n;let r;return r=(null==(n=t.currentSlot)?void 0:n.eventName)?t.currentSlot.eventName:t.overwriteMessage?t.overwriteMessage:"Loading...",s(e,{text:r})}));const k=({children:e})=>s("div",{class:"text-center flex flex-col min-h-screen items-center justify-center p-[20px]"},e),O=({children:e})=>s("div",{class:"flex flex-row justify-between items-stretch"},e),M=({children:e,location:t,isSticky:n=!1})=>s("div",{class:`${n?"fixed":"absolute"} top-[13px] ${"right"===t?"right-[13px]":""} ${"left"===t?"left-[13px]":""}`},e),D=({text:e,children:t})=>s("div",{class:"pb-[40px]"},s("h2",{class:"text-[30px] font-bold pb-[10px]"},e),s("div",{class:"text-center flex flex-col items-center justify-center space-y-[10px]"},t)),C=({icon:e,alt:t,url:n})=>s("img",{src:e,alt:t,class:"w-[30px] h-[30px]",onClick:()=>{n&&i(n,!1)}}),L=({children:e})=>s("div",{class:"flex flex-row items-center justify-center space-x-1"},e),T=({children:e,color:t})=>s("div",{style:{backgroundColor:t}},e);var j="_gradient_1v12f_1";const E=({children:e})=>s("div",{class:j},e),N=({children:e})=>{var t;const{background:n}=(()=>{const[e]=w("background");return{background:e?JSON.parse(e):null}})();switch(null==n?void 0:n.background){case"color":return s(T,{color:null==(t=n.data)?void 0:t.color},e);case"gradient":return s(E,null,e);default:return s(T,{color:"#282c34"},e)}},$=({end:e,overwriteText:t})=>{const[n,r]=o(""),l=()=>{if(t)return r(t);const n=Math.floor((e.valueOf()-(new Date).valueOf())/1e3),l=Math.abs(n);let o="";l/3600>=1&&(o+=`${Math.floor(l/3600)}h`),l/60>=1&&(o+=` ${Math.floor(Math.floor(l%3600)/60)}m`),o+=` ${l%60}s`,o=`${n<0?"-":""}${o.trim()}`,r(o)};return a((()=>{l();const e=setInterval(l,1e3);return()=>{clearInterval(e)}})),s("p",{class:"text-[80px] pb-[10px] text-white"},n)};var I=y((({data:e})=>s("p",{class:"text-[20px] pt-[5px] text-white"},e.now.toLocaleString())));const B=({text:e})=>s("p",{class:"text-[25px] text-white"},e),P=()=>s(N,null,s(O,null,s(M,{location:"left"},s(C,{icon:"/assets/cog-solid.a1bf6849.svg",alt:"Settings",url:"/settings"})),s(M,{location:"right"},s(I,null))),s(k,null,s(b,{display:$}),s(S,{display:B}))),J=()=>s("div",{class:"text-center"},s("h1",null,"Error 404"),s("p",null,"That page doesn't exist."),s("h4",null,"Back to"," ",s(u,{href:"/",class:"text-blue-600"},"Home")));const _=()=>{const[e,t]=o(null),[n,r]=w("schedule_id");return a((()=>{(async()=>{console.log("fetching all schedules");const{fetchAllSchedules:e}=f(),t=await fetch(e);return await t.json()})().then((e=>{const n={};e.forEach((e=>{n[e.group]||(n[e.group]=[]),n[e.group].push(e)})),t(n)})).catch((()=>{console.log("Failed to fetch data")}))}),[]),s("select",{onChange:e=>{var t;r(null==(t=e.target)?void 0:t.value)}},null===n?s("option",{selected:!0,value:void 0},"Please select a schedule"):null,e?Object.keys(e).map((t=>{var r;return s("optgroup",{label:t,key:t},null==(r=e[t])?void 0:r.map((e=>s("option",{key:e.id,selected:n===e.id,value:e.id},e.name))))})):s("option",null,"Loading"))},z=({background:e,setBackground:t})=>{var n,r;const l=e?JSON.parse(e):null,[a,c]=o(null!=(r=null==(n=null==l?void 0:l.data)?void 0:n.color)?r:"#282c34"),i="color"===(null==l?void 0:l.background);return s(L,null,s("input",{type:"radio",checked:i,onChange:e=>{var n;"on"===(null==(n=e.target)?void 0:n.value)&&t(JSON.stringify({background:"color",data:{color:a}}))}}),s("input",{type:"color",value:a,onChange:e=>{t(JSON.stringify({background:"color",data:{color:e.target.value}})),c(e.target.value)}}),s("p",null,"Custom Color"))},A=({background:e,setBackground:t})=>{const n=e?JSON.parse(e):null,r="gradient"===(null==n?void 0:n.background);return s(L,null,s("input",{type:"radio",checked:r,onChange:e=>{var n;"on"===(null==(n=e.target)?void 0:n.value)&&t(JSON.stringify({background:"gradient"}))}}),s("p",null,"Gradient"))},q=()=>{const[e,t]=w("background");return s("div",null,s(z,{background:e,setBackground:t}),s("p",null,"or"),s(A,{background:e,setBackground:t}))},F=()=>s("div",null,s(O,null,s(M,{location:"right",isSticky:!1},s(C,{icon:"/assets/times-solid.115f5fad.svg",alt:"Go Back",url:"/"}))),s(k,null,s(D,{text:"Select a Schedule"},s(_,null)),s(D,{text:"Styling / Background"},s(q,null))));v(s((()=>s(x,null,s(d,null,s(g,{path:"/",component:P}),s(g,{path:"/settings",component:F}),s(g,{default:!0,component:J})))),null),document.getElementById("app"));
