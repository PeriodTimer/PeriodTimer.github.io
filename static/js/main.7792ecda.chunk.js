(this.webpackJsonpclasstimers=this.webpackJsonpclasstimers||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(1),a=n.n(c),i=n(7),r=n.n(i),s=(n(13),n(3)),l=n(2),u=function(e){return e-18e3<0?e-18e3+86400:e-18e3};var d=function(e){var t=Object(c.useState)(0),n=Object(l.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){var t=u(Math.round(Date.now()/1e3%86400)),n=e.timeSlot,o=e.isWeekend,c=e.time;if(o)i("Imagine Having School on the Weekends");else if(void 0!==n){if(void 0!==n.primaryFocus&&1===n.primaryFocus)return void i(c.toLocaleTimeString());var a=n.end-t,r="";a/3600>=1&&(r+="".concat(Math.floor(a/3600),"h")),a/60>=1&&(r+=" ".concat(Math.floor(Math.floor(a%3600)/60),"m")),r+=" ".concat(a%60,"s"),i(r.trim())}})),Object(o.jsx)("h1",{children:a})},f=function(e){var t=Object(c.useState)("loading"),n=Object(l.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(null),s=Object(l.a)(r,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){var t=e.timeSlot;if(e.isWeekend)i("Imagine Having School on the Weekends");else{var n="";if(void 0!==t){if(void 0!==t.richContext){var o=localStorage.getItem("VRA_"+t.richContext);null!==o&&(n=" | ".concat(o))}if(t.mRichContext){var c=localStorage.getItem("VRA_"+t.mRichContext.from),a=localStorage.getItem("VRA_"+t.mRichContext.to);null!==c&&null!==a&&(n=" | ".concat(c," \u2192 ").concat(a));var r=null;void 0!==t.mRichContext&&(r=localStorage.getItem("VRA_LINK_"+t.mRichContext.to)),void 0!==t.richContext&&(r=localStorage.getItem("VRA_LINK_"+t.richContext)),null!==r?d(r):console.log("Avoiding Settings Link")}i("".concat(t.event).concat(n))}}})),Object(o.jsx)("p",{onClick:function(){null!==u?window.open(u):console.log("nolink")},children:a})},h=n.p+"static/media/times.8ada58e8.svg";var j=function(e){var t=Object(c.useState)(null),n=Object(l.a)(t,2),i=n[0],r=n[1],u=Object(c.useState)(null),d=Object(l.a)(u,2),f=d[0],j=d[1],v=function(e,t){var n;n=t,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n)||(alert("Your URL value is Invalid, please make sure it is valid before proceding"),localStorage.removeItem("VRA_LINK_"+e))};return Object(c.useEffect)((function(){var t=e.times;if(t){var n={};Object.keys(t).forEach((function(e){n[e]=[],t[e].forEach((function(t){if(void 0!==t.richContext){var c=localStorage.getItem("VRA_"+t.richContext),i="";null!==c&&(i=c);var r=localStorage.getItem("VRA_LINK_"+t.richContext),s="";null!==r&&(s=r),n[e].push(Object(o.jsxs)(a.a.Fragment,{children:[Object(o.jsxs)("p",{children:[t.event," | ID: ",t.richContext]}),Object(o.jsxs)("div",{className:"richContextContainer",children:[Object(o.jsx)("p",{className:"editorLabel",children:"Label: "}),Object(o.jsx)("input",{className:"richContextEditor",type:"text",defaultValue:i,onInput:function(e){return n=t.richContext,o=e.target.value,void localStorage.setItem("VRA_"+n,o);var n,o}})]}),Object(o.jsxs)("div",{className:"richContextContainer",children:[Object(o.jsx)("p",{className:"editorLabel",children:"Link: "}),Object(o.jsx)("input",{className:"richContextEditor",type:"text",defaultValue:s,onInput:function(e){return n=t.richContext,o=e.target.value,void localStorage.setItem("VRA_LINK_"+n,o);var n,o},onBlur:function(e){return v(t.richContext,e.target.value)}})]})]},t.richContext))}}))}));var c=[];Object.keys(n).forEach((function(e){var t=function(e){switch(e){case"1":return"Monday";case"2":return"Tuesday";case"3":return"Wednesday";case"4":return"Thrusday";case"5":return"Friday";case"any":return"Every Day";default:return"idk \u2192 "+e}}(e.toString());c.push(Object(o.jsx)("h2",{children:t},t)),c=[].concat(Object(s.a)(c),Object(s.a)(n[e]))})),r(c)}var i=function(t){"Escape"===t.key&&(t.preventDefault(),e.handleCloseSettings())};return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[]),Object(o.jsxs)("div",{className:"modal",children:[Object(o.jsx)("img",{src:h,alt:"Close!",className:"modal-close",onClick:function(){return e.handleCloseSettings()}}),Object(o.jsxs)("div",{className:"richContextEditors",children:[i," ",Object(o.jsxs)("div",{className:"footer",children:[Object(o.jsx)("button",{onClick:function(){return function(){var e={};Object.keys(localStorage).forEach((function(t){t.match(/VRA_[0-9]+|VRA_LINK_[0-9]+/)&&(e[t]=localStorage.getItem(t))}));var t=document.createElement("a"),n=new Blob([JSON.stringify(e)],{type:"application/json"});t.href=URL.createObjectURL(n),t.download="VRA_Export.json",document.body.appendChild(t),t.click()}()},children:"Export!"}),Object(o.jsx)("input",{type:"file",accept:".json, .txt",onChange:function(e){j(e.target.files[0])},onClick:function(e){e.target.value=null}}),Object(o.jsx)("button",{onClick:function(){return function(){var e=new FileReader;e.onload=function(e){return function(){var t=e.result,n=JSON.parse(t);Object.keys(n).forEach((function(e){localStorage.setItem(e,n[e])})),window.location.reload()}}(e),e.readAsText(f)}()},children:"Submit"})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Hello"}),Object(o.jsx)("p",{children:"Period Timers was coded by Vlad Bondar (25bondarv@mtps.us)."}),Object(o.jsx)("p",{children:"Please send Bug Reports and Suggestions to me on Google Hangouts (Vladimir Bondar)"})]})]})},v=n.p+"static/media/fa-cog.349ce3a7.svg";var g=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],i=n[1];return Object(o.jsxs)(o.Fragment,{children:[!1===a?Object(o.jsx)("img",{src:v,className:"settings-icon",alt:"Settings Icon",onClick:function(){return i(!0),void e.changeAppVisibility(!1)}}):null,a?Object(o.jsx)(j,{handleCloseSettings:function(){i(!1),e.changeAppVisibility(!0)},times:e.times}):null]})};n(14);var b=function(){var e=Object(c.useState)(new Date),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),r=Object(l.a)(i,2),h=r[0],j=r[1],v=Object(c.useState)(void 0),b=Object(l.a)(v,2),m=b[0],p=b[1],O=Object(c.useState)(null),x=Object(l.a)(O,2),S=x[0],w=x[1],k=Object(c.useState)(!1),C=Object(l.a)(k,2),y=C[0],I=C[1];return Object(c.useEffect)((function(){fetch("https://api.jsonbin.io/b/5fca6e3365c249127ba338d0").then((function(e){return e.json()})).then((function(e){return w(e)}))}),[]),Object(c.useEffect)((function(){var e=setInterval((function(){return function(){a(new Date);var e=u(Math.round(Date.now()/1e3%86400)),t=(new Date).getDay().toString();if("6"!==t&&"7"!==t){if(y&&I(!1),S){var n=[].concat(Object(s.a)(S.any),Object(s.a)(S[t])),o=!1;n.forEach((function(t){t.start<=e&&t.end>=e&&(p(t),o=!0)})),o||console.log("Error: No Section Found, Please report this to Vlad: "+btoa(JSON.stringify(S)))}}else I(!0)}()}),1e3);return function(){clearInterval(e)}})),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("header",{className:"App-header",children:[Object(o.jsx)(g,{times:S,changeAppVisibility:j}),h&&1!==(null===m||void 0===m?void 0:m.primaryFocus)?Object(o.jsxs)("p",{className:"corner-clock",children:[n.toLocaleTimeString()," ",n.toLocaleDateString()]}):null,h&&1===(null===m||void 0===m?void 0:m.primaryFocus)?Object(o.jsx)("p",{className:"corner-clock",children:n.toLocaleDateString()}):null]}),h?Object(o.jsxs)("header",{className:"App-body",children:[Object(o.jsx)(d,{timeSlot:m,isWeekend:y,time:n}),Object(o.jsx)(f,{timeSlot:m,isWeekend:y})]}):null]})},m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),a(e),i(e)}))};r.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(b,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");m?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):p(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("Localhost Message: This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):p(t,e)}))}}({onSuccess:function(){return console.log("good")},onUpdate:function(e){e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}),O(console.log)}},[[15,1,2]]]);
//# sourceMappingURL=main.7792ecda.chunk.js.map